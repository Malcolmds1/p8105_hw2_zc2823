Homework2_zc2823
================
2025-09-23

# Problem 1

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readr)
library(janitor)
```

    ## 
    ## Attaching package: 'janitor'
    ## 
    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

``` r
library(dplyr)
```

## First, clean the data in pols-month.csv.

Load the pols data

``` r
pols_month = read_csv("./data/pols-month.csv") %>%
  clean_names()
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Clean the pols data

``` r
pols_month_clean = pols_month %>% 
  separate(mon, into = c("year","month","day"), sep="-") %>% 
  mutate(year = as.integer(year),
         month = as.integer(month),
         day = as.integer(day)) %>% 
  mutate(month = month.name[month]) %>% 
  mutate(president = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem",
    TRUE ~ NA_character_
  )) %>% 
  select(-prez_gop, -prez_dem, -day)
```

## Second, clean the data in snp.csv with similar process to the above

Let’s Go!

``` r
snp = read_csv("./data/snp.csv") %>%
  clean_names() %>% 
  mutate(date = mdy(date)) %>%
  transmute(
    year  = year(date),
    month = month(date, label = TRUE, abbr = FALSE) |> as.character(),
    close
  ) %>%
  arrange(year, match(month, month.name))
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Third, tidy the unemployment data

Load the unemployment data

``` r
unemp = read_csv("./data/unemployment.csv") %>%
  clean_names() %>% 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "unemployment",
    values_transform = list(unemployment = as.numeric)
  ) %>%
  mutate(
    year = as.integer(year),
    month = month.name[match(month, tolower(month.abb))]
  ) %>%
  arrange(year, match(month, month.name))        
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Let’s merge them

``` r
merged <- pols_month_clean %>%
  left_join(snp, by = c("year","month")) %>%
  left_join(unemp, by = c("year","month")) %>%
  mutate(month = factor(month, levels = month.name, ordered = TRUE)) %>%
  arrange(year, month)
```

## About these datasets

### For each dataset

``` r
dim(pols_month_clean)
```

    ## [1] 822   9

``` r
dim(snp)
```

    ## [1] 787   3

``` r
dim(unemp)
```

    ## [1] 816   3

``` r
range(pols_month_clean$year)
```

    ## [1] 1947 2015

``` r
range(snp$year)
```

    ## [1] 1969 2068

``` r
range(unemp$year)
```

    ## [1] 1948 2015

``` r
names(pols_month_clean)
```

    ## [1] "year"      "month"     "gov_gop"   "sen_gop"   "rep_gop"   "gov_dem"  
    ## [7] "sen_dem"   "rep_dem"   "president"

``` r
names(snp)
```

    ## [1] "year"  "month" "close"

``` r
names(unemp)
```

    ## [1] "year"         "month"        "unemployment"

The pols_month dataset (822 × 9, 1947–2015) records political data,
including counts of governors, senators, representatives by party, and
the president’s party. The snp dataset (787 × 3, 1969–2015) contains S&P
500 monthly closing values. The unemp dataset (816 × 3, 1948–2015)
provides monthly U.S. unemployment rates.

### For the resulting dataset

``` r
dim(merged)
```

    ## [1] 822  11

``` r
range(merged$year, na.rm = TRUE)
```

    ## [1] 1947 2015

``` r
names(merged)
```

    ##  [1] "year"         "month"        "gov_gop"      "sen_gop"      "rep_gop"     
    ##  [6] "gov_dem"      "sen_dem"      "rep_dem"      "president"    "close"       
    ## [11] "unemployment"

The resulting merged dataset contains 822 observations and 11 variables,
covering the years 1947 through 2015. It combines political indicators
(such as the number of governors, senators, and representatives by
party, along with the president’s party), economic measures (the monthly
closing value of the S&P 500 index), and labor market outcomes (the
monthly U.S. unemployment rate). Key variables include year, month,
president, close, and unemployment, together with counts of governors,
senators, and representatives from both parties.
