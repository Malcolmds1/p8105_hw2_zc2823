---
title: "Homework2_zc2823"
output: github_document
date: "2025-09-23"
---

# Problem 1

```{r}
library(tidyverse)
library(readr)
library(janitor)
library(dplyr)
```

## First, clean the data in pols-month.csv.

Load the pols data

```{r}
pols_month = read_csv("./data/pols-month.csv") %>%
  clean_names()
```

Clean the pols data

```{r}
pols_month_clean = pols_month %>% 
  separate(mon, into = c("year","month","day"), sep="-") %>% 
  mutate(year = as.integer(year),
         month = as.integer(month),
         day = as.integer(day)) %>% 
  mutate(month = month.name[month]) %>% 
  mutate(president = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem",
    TRUE ~ NA_character_
  )) %>% 
  select(-prez_gop, -prez_dem, -day)
```

## Second, clean the data in snp.csv with similar process to the above

Let's Go!

```{r}
snp = read_csv("./data/snp.csv") %>%
  clean_names() %>% 
  mutate(date = mdy(date)) %>%
  transmute(
    year  = year(date),
    month = month(date, label = TRUE, abbr = FALSE) |> as.character(),
    close
  ) %>%
  arrange(year, match(month, month.name))

```

## Third, tidy the unemployment data

Load the unemployment data

```{r}
unemp = read_csv("./data/unemployment.csv") %>%
  clean_names() %>% 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "unemployment",
    values_transform = list(unemployment = as.numeric)
  ) %>%
  mutate(
    year = as.integer(year),
    month = month.name[match(month, tolower(month.abb))]
  ) %>%
  arrange(year, match(month, month.name))        
```

## Let's merge them

```{r}
merged <- pols_month_clean %>%
  left_join(snp, by = c("year","month")) %>%
  left_join(unemp, by = c("year","month")) %>%
  mutate(month = factor(month, levels = month.name, ordered = TRUE)) %>%
  arrange(year, month)
```

## About these datasets

### For each dataset

```{r}
dim(pols_month_clean)
dim(snp)
dim(unemp)
range(pols_month_clean$year)
range(snp$year)
range(unemp$year)
names(pols_month_clean)
names(snp)
names(unemp)
```

The pols_month dataset (822 × 9, 1947–2015) records political data, including counts of governors, senators, representatives by party, and the president’s party.
The snp dataset (787 × 3, 1969–2015) contains S&P 500 monthly closing values.
The unemp dataset (816 × 3, 1948–2015) provides monthly U.S. unemployment rates.

### For the resulting dataset

```{r}
dim(merged)
range(merged$year, na.rm = TRUE)
names(merged)
```

The resulting merged dataset contains 822 observations and 11 variables, covering the years 1947 through 2015. It combines political indicators (such as the number of governors, senators, and representatives by party, along with the president’s party), economic measures (the monthly closing value of the S&P 500 index), and labor market outcomes (the monthly U.S. unemployment rate). Key variables include year, month, president, close, and unemployment, together with counts of governors, senators, and representatives from both parties.



